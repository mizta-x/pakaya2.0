<!DOCTYPE html>
<html lang="en">
  <%- include('comp/head') %>
  <body>
    <div class="container-scroller">
      <%- include('comp/nav') %>
      <div class="container-fluid page-body-wrapper">
        <%- include('comp/header') %>

        <div class="main-panel">
          <div class="content-wrapper">
            <div class="page-header">
              <!-- API Documentation Title -->
              <h3 class="page-title" style="font-size: 1.5rem; font-weight: 700; color: #333; text-align: center;">
                API Documentation
              </h3>
            </div>

            <!-- API Endpoint Card with Added Details -->
            <div class="card mb-4 shadow-sm">
              <div class="card-body">
                <h4 class="card-title"><%= api.name %> Api</h4>
                <p class="card-subtitle text-muted mb-3"> <%= api.desc %> </p>

                <!-- API Method and Endpoint -->
                <div class="mb-3">
                  <span class="badge bg-primary"><%= api.method %></span>
                  <code><%= api._link %></code>
                </div>

                <h6>Request Example</h6>
                <ul class="nav nav-tabs mb-2" id="langTabs" role="tablist">
                  <% lang.forEach((item, ix) => { %>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link<%= ix == 0 ? ' active' : '' %>" id="<%= item.lang %>-tab" data-bs-toggle="tab" data-bs-target="#<%= item.lang %>" type="button" role="tab"><%= item.name %></button>
                    </li>
                  <% }); %>
                </ul>

                <div class="tab-content position-relative" id="codeTabs">
                  <% lang.forEach((item, ix) => { %>
                    <div class="tab-pane fade<%= ix == 0 ? ' show active' : '' %>" id="<%= item.lang %>" role="tabpanel">
                      <div class="code-box" style="position:relative;">
                        <pre><code class="language-<%= item.code %>" id="code-<%= item.lang %>"><%= item.script %></code></pre>
                        <button class="btn btn-sm btn-outline-success position-absolute top-0 end-0 m-2" onclick="copyToClipboard('code-<%= item.lang %>', this)">Copy</button>
                      </div>
                    </div>
                  <% }); %>
                </div>

                <!-- Demo Button -->
                <h5 class="mt-4">Demo</h5>
                <button class="btn btn-lg btn-primary shadow-sm" onclick="window.location.href='<%= api.demo %>'">Go to Demo</button>
              </div>
            </div>
            <!-- End of API Card -->

            <!-- Parameters (Hardcoded) Section with Icons -->
            <div class="col-md-4 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">API Parameters</h4>
                  <p class="card-description">Below are the required API parameters:</p>
                  <ul class="list-arrow">
                    <li><i class="mdi mdi-link"></i> <strong>URL:</strong> Facebook URL (e.g., https://facebook.com/example)</li>
                    <li><i class="mdi mdi-video"></i> <strong>Quality:</strong> Video Quality (choose from: 720p, 1080p, 4k)</li>
                    <li><i class="mdi mdi-volume-high"></i> <strong>Sound:</strong> Sound (true or false)</li>
                  </ul>
                </div>
              </div>
            </div>
            <!-- End of Parameters Section -->

          </div>
          <%- include('comp/footer') %>
        </div>
      </div>
    </div>

    <script>
      // Function to copy code to clipboard and update button text
      function copyToClipboard(codeId, button) {
        const code = document.getElementById(codeId).textContent;
        navigator.clipboard.writeText(code).then(() => {
          // Change the button text to 'Copied!'
          button.innerText = "Copied!";
          // Revert back to 'Copy' after 2 seconds
          setTimeout(() => {
            button.innerText = "Copy";
          }, 2000);
        });
      }
    </script>

    <%- include('comp/addScript') %>

  </body>
</html>
